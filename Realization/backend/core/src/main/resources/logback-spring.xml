<?xml version="1.0" encoding="UTF-8"?>
<!-- https://springframework.guru/using-logback-spring-boot/ -->
<!-- http://logback.qos.ch/manual/appenders.html -->
<configuration>
	<springProperty name="spring.datasource.driver-class-name" source="spring.datasource.driver-class-name"/>
	<springProperty name="spring.datasource.url" source="spring.datasource.url"/>
	<springProperty name="spring.datasource.username" source="spring.datasource.username"/>
	<springProperty name="spring.datasource.password" source="spring.datasource.password"/>
	<springProperty name="spring.profiles.active" source="spring.profiles.active"/>

	<appender name="DB" class="ch.qos.logback.classic.db.DBAppender">
	    <connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource">
	        <driverClass>${spring.datasource.driver-class-name}</driverClass>
	        <url>${spring.datasource.url}</url>
	        <user>${spring.datasource.username}</user>
	        <password>${spring.datasource.password}</password>
	    </connectionSource>
	</appender>
	
	<appender name="DB_ASYNC" class="ch.qos.logback.classic.AsyncAppender">
        <appender-ref ref="DB" />
        <includeCallerData>true</includeCallerData>
    </appender>
	
	<include resource="org/springframework/boot/logging/logback/base.xml"/>
	<include resource="logback-spring-${spring.profiles.active}.xml"/>
</configuration>