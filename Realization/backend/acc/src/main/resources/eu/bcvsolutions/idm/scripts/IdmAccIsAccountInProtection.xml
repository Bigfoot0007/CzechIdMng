<?xml version = "1.0" encoding = "UTF-8" standalone = "yes"?>
<!-- 
!! Only example !! Script import is not supported yet!

Return 'true', if  account for given UID (AccAccount UID) and system ID is in protection state. Else return 'false'.
Beware that in transformation rules SysSystemEntity UID is given as the input, therefore if account and system
UID are not equal, this script will not return desired result.

parameters:
	-	system
	-	uid
 -->
 
<script>
	<name>Is account for given UID in protection mode?</name>
	<code>isAccountInProtection</code>
	<category>TRANSFORM_TO</category>
	<type>groovy</type>
	<body>
	<![CDATA[
	org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger("isAccountInProtection script");
	
	log.debug("Start 'isAccountInProtection' script.");
	
	// Load account
	def account = accAccountService.getAccount(uid,system.getId());
	
	if(account){
	    // Account was found. Return protection state.
	    return account.isInProtection();
	}
	return false;
	]]>
	</body>
	<parameters>uid, system</parameters>
	<services>
		<service>
			<name>accAccountService</name>
			<className>eu.bcvsolutions.idm.acc.service.impl.DefaultAccAccountService</className>
		</service>
	</services>
	<allowClasses>
		<allowClass>
			<className>eu.bcvsolutions.idm.acc.entity.AccAccount</className>
		</allowClass>
	</allowClasses>
</script>